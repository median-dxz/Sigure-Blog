---
import { getTagList } from "@utils/ssr/content";
import { getTagUrl } from "@utils/url";
import ButtonTag from "../../components/control/ButtonTag.astro";
import I18nKey from "../../i18n/i18nKey";
import { i18n } from "../../i18n/translation";
import WidgetLayout from "./WidgetLayout.astro";

const tags = await getTagList();

const COLLAPSED_HEIGHT = "7.5rem";

const isCollapsed = tags.length >= 20;

interface Props {
  class?: string;
  style?: string;
}
const className = Astro.props.class;
---

<WidgetLayout
  name={i18n(I18nKey.tags)}
  id="tags"
  isCollapsed={isCollapsed}
  collapsedHeight={COLLAPSED_HEIGHT}
  class={className}
>
  <div class="flex gap-2 flex-wrap">
    {
      tags.map((t) => (
        <ButtonTag href={getTagUrl(t.name)} label={`View all posts with the ${t.name.trim()} tag`}>
          {t.name.trim()}
        </ButtonTag>
      ))
    }
  </div>
</WidgetLayout>
